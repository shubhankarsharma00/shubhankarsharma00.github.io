<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: UX.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: UX.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var smartDropXX = 50;
var smartDropYY = 80;

// Object stores the position of context menu
var ctxPos = {
    x: 0,
    y: 0,
    visible: false,
};

// Function hides the context menu
function hideContextMenu() {
    var el = document.getElementById('contextMenu');
    el.style = 'opacity:0;';
    setTimeout(() => {
        el.style = 'visibility:hidden;';
        ctxPos.visible = false;
    }, 200); // Hide after 2 sec
}

// Function displays context menu
function showContextMenu() {
    if (layoutMode) return false; // Hide context menu when it is in Layout Mode
    $('#contextMenu').css({
        visibility: 'visible',
        opacity: 1,
        top: `${ctxPos.y}px`,
        left: `${ctxPos.x}px`,
    });
    ctxPos.visible = true;
    return false;
}

// Function is called when context item is clicked
// eslint-disable-next-line no-unused-vars
function menuItemClicked(id) {
    hideContextMenu();

    if (id === 0) {
        document.execCommand('copy');
    } else if (id === 1) {
        document.execCommand('cut');
    } else if (id === 2) {
        // document.execCommand('paste'); it is restricted to sove this problem we use dataPasted variable
        paste(localStorage.getItem('clipboardData'));
    } else if (id === 3) {
        deleteSelected();
    } else if (id === 4) {
        undo();
        undo();
    } else if (id === 5) {
        newCircuit();
    } else if (id === 6) {
        createSubCircuitPrompt();
    } else if (id === 7) {
        globalScope.centerFocus(false);
    }
}
/**
 * adds some UI elements to side bar and
 * menu also attaches listeners to sidebar
 */
function setupUI() {
    var ctxEl = document.getElementById('contextMenu');
    document.addEventListener('mousedown', (e) => {
        // Check if mouse is not inside the context menu and menu is visible
        if (!((e.clientX >= ctxPos.x &amp;&amp; e.clientX &lt;= ctxPos.x + ctxEl.offsetWidth)
        &amp;&amp; (e.clientY >= ctxPos.y &amp;&amp; e.clientY &lt;= ctxPos.y + ctxEl.offsetHeight))
        &amp;&amp; (ctxPos.visible &amp;&amp; e.which !== 3)) {
            hideContextMenu();
        }

        // Change the position of context whenever mouse is clicked
        ctxPos.x = e.clientX;
        ctxPos.y = e.clientY;
    });
    document.getElementById('canvasArea').oncontextmenu = showContextMenu;

    $("#sideBar").resizable({
        handles: 'e',
        // minWidth:270,
    });
    $("#menu").accordion({
        collapsible: true,
        active: false,
        heightStyle: "content"
    });
    // $( "#plot" ).resizable({
    // handles: 'n',
    //     // minHeight:200,
    // });

    $('.logixModules').mousedown(function () {
        //////console.log(smartDropXX,smartDropYY);
        if (simulationArea.lastSelected &amp;&amp; simulationArea.lastSelected.newElement) simulationArea.lastSelected.delete();
        var obj = new window[this.id](); //(simulationArea.mouseX,simulationArea.mouseY);
        simulationArea.lastSelected = obj;
        // simulationArea.lastSelected=obj;
        // simulationArea.mouseDown=true;
        smartDropXX += 70;
        if (smartDropXX / globalScope.scale > width) {
            smartDropXX = 50;
            smartDropYY += 80;
        }
    });
    $('.logixButton').click(function () {
        window[this.id]();
    });
    // var dummyCounter=0;


    $('.logixModules').hover(function () {
        // Tooltip can be statically defined in the prototype.
        var tooltipText = window[this.id].prototype.tooltipText;
        if (!tooltipText) return;
        $("#Help").addClass("show");
        $("#Help").empty();
        ////console.log("SHOWING")
        $("#Help").append(tooltipText);
    }); // code goes in document ready fn only
    $('.logixModules').mouseleave(function () {
        $("#Help").removeClass("show");

    }); // code goes in document ready fn only


    // $('#saveAsImg').click(function(){
    //     saveAsImg();
    // });
    // $('#Save').click(function(){
    //     Save();
    // });
    // $('#moduleProperty').draggable();

}


var prevPropertyObj = undefined;

function showProperties(obj) {
    if (obj == prevPropertyObj) return;
    hideProperties();

    prevPropertyObj = obj;
    if (simulationArea.lastSelected === undefined || ["Wire", "CircuitElement", "Node"].indexOf(simulationArea.lastSelected.objectType) !== -1) {
        $('#moduleProperty').show();
        $('#moduleProperty-inner').append("&lt;div id='moduleProperty-header'>" + "Project Properties" + "&lt;/div>");
        $('#moduleProperty-inner').append("&lt;p>Project : &lt;input class='objectPropertyAttribute' type='text'  name='setProjectName'  value='" + (projectName || "Untitled") + "'>&lt;/p>");
        $('#moduleProperty-inner').append("&lt;p>Circuit : &lt;input class='objectPropertyAttribute' type='text'  name='changeCircuitName'  value='" + (globalScope.name || "Untitled") + "'>&lt;/p>");
        $('#moduleProperty-inner').append("&lt;p>Clock Time : &lt;input class='objectPropertyAttribute' min='50' type='number' style='width:100px' step='10' name='changeClockTime'  value='" + (simulationArea.timePeriod) + "'>ms&lt;/p>");
        $('#moduleProperty-inner').append("&lt;p>Clock Enabled : &lt;label class='switch'> &lt;input type='checkbox' " + ["", "checked"][simulationArea.clockEnabled + 0] + " class='objectPropertyAttributeChecked' name='changeClockEnable' > &lt;span class='slider'>&lt;/span> &lt;/label>&lt;/p>");
        $('#moduleProperty-inner').append("&lt;p>Lite Mode : &lt;label class='switch'> &lt;input type='checkbox' " + ["", "checked"][lightMode + 0] + " class='objectPropertyAttributeChecked' name='changeLightMode' > &lt;span class='slider'>&lt;/span> &lt;/label>&lt;/p>");
        // $('#moduleProperty-inner').append("&lt;p>  ");
        $('#moduleProperty-inner').append("&lt;p>&lt;button type='button' class='objectPropertyAttributeChecked btn btn-danger btn-xs' name='deleteCurrentCircuit' >Delete Circuit&lt;/button>  &lt;button type='button' class='objectPropertyAttributeChecked btn btn-primary btn-xs' name='toggleLayoutMode' >Edit Layout&lt;/button> &lt;/p>");
    } else {
        $('#moduleProperty').show();

        $('#moduleProperty-inner').append("&lt;div id='moduleProperty-header'>" + obj.objectType + "&lt;/div>");
        // $('#moduleProperty').append("&lt;input type='range' name='points' min='1' max='32' value="+obj.bitWidth+">");
        if (!obj.fixedBitWidth)
            $('#moduleProperty-inner').append("&lt;p>BitWidth: &lt;input class='objectPropertyAttribute' type='number'  name='newBitWidth' min='1' max='32' value=" + obj.bitWidth + ">&lt;/p>");

        if (obj.changeInputSize)
            $('#moduleProperty-inner').append("&lt;p>Input Size: &lt;input class='objectPropertyAttribute' type='number'  name='changeInputSize' min='2' max='10' value=" + obj.inputSize + ">&lt;/p>");

        if (!obj.propagationDelayFixed)
            $('#moduleProperty-inner').append("&lt;p>Delay: &lt;input class='objectPropertyAttribute' type='number'  name='changePropagationDelay' min='0' max='100000' value=" + obj.propagationDelay + ">&lt;/p>");


        $('#moduleProperty-inner').append("&lt;p>Label: &lt;input class='objectPropertyAttribute' type='text'  name='setLabel'  value='" + escapeHtml(obj.label) + "'>&lt;/p>");


        if (!obj.labelDirectionFixed) {
            var s = $("&lt;select class='objectPropertyAttribute' name='newLabelDirection'>" + "&lt;option value='RIGHT' " + ["", "selected"][+(obj.labelDirection == "RIGHT")] + " >RIGHT&lt;/option>&lt;option value='DOWN' " + ["", "selected"][+(obj.labelDirection == "DOWN")] + " >DOWN&lt;/option>&lt;option value='LEFT' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.labelDirection == "LEFT")] + " >LEFT&lt;/option>&lt;option value='UP' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.labelDirection == "UP")] + " >UP&lt;/option>" + "&lt;/select>");
            s.val(obj.labelDirection);
            $('#moduleProperty-inner').append("&lt;p>Label Direction: " + $(s).prop('outerHTML') + "&lt;/p>");
        }


        if (!obj.directionFixed) {
            var s = $("&lt;select class='objectPropertyAttribute' name='newDirection'>" + "&lt;option value='RIGHT' " + ["", "selected"][+(obj.direction == "RIGHT")] + " >RIGHT&lt;/option>&lt;option value='DOWN' " + ["", "selected"][+(obj.direction == "DOWN")] + " >DOWN&lt;/option>&lt;option value='LEFT' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.direction == "LEFT")] + " >LEFT&lt;/option>&lt;option value='UP' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.direction == "UP")] + " >UP&lt;/option>" + "&lt;/select>");
            $('#moduleProperty-inner').append("&lt;p>Direction: " + $(s).prop('outerHTML') + "&lt;/p>");

        } else if (!obj.orientationFixed) {
            var s = $("&lt;select class='objectPropertyAttribute' name='newDirection'>" + "&lt;option value='RIGHT' " + ["", "selected"][+(obj.direction == "RIGHT")] + " >RIGHT&lt;/option>&lt;option value='DOWN' " + ["", "selected"][+(obj.direction == "DOWN")] + " >DOWN&lt;/option>&lt;option value='LEFT' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.direction == "LEFT")] + " >LEFT&lt;/option>&lt;option value='UP' " + "&lt;option value='RIGHT'" + ["", "selected"][+(obj.direction == "UP")] + " >UP&lt;/option>" + "&lt;/select>");
            $('#moduleProperty-inner').append("&lt;p>Orientation: " + $(s).prop('outerHTML') + "&lt;/p>");
        }

        if (obj.mutableProperties) {
            for (attr in obj.mutableProperties) {
                var prop = obj.mutableProperties[attr];
                if (obj.mutableProperties[attr].type == "number") {
                    var s = "&lt;p>" + prop.name + "&lt;input class='objectPropertyAttribute' type='number'  name='" + prop.func + "' min='" + (prop.min || 0) + "' max='" + (prop.max || 200) + "' value=" + obj[attr] + ">&lt;/p>";
                    $('#moduleProperty-inner').append(s);
                }
                else if (obj.mutableProperties[attr].type == "text") {
                    var s = "&lt;p>" + prop.name + "&lt;input class='objectPropertyAttribute' type='text'  name='" + prop.func + "' maxlength='" + (prop.maxlength || 200) + "' value=" + obj[attr] + ">&lt;/p>";
                    $('#moduleProperty-inner').append(s);
                }
                else if (obj.mutableProperties[attr].type == "button") {
                    var s = "&lt;p>&lt;button class='objectPropertyAttribute btn btn-primary btn-xs' type='button'  name='" + prop.func + "'>" + prop.name + "&lt;/button>&lt;/p>";
                    $('#moduleProperty-inner').append(s);
                }

            }
        }
    }

    var helplink = obj &amp;&amp; (obj.helplink);
    if (helplink) {
        $('#moduleProperty-inner').append('&lt;p>&lt;button id="HelpButton" class="btn btn-primary btn-xs" type="button" >Help &amp;#9432&lt;/button>&lt;/p>');
        $('#HelpButton').click(function () {
            window.open(helplink);
        });
    }

    function checkValidBitWidth() {
        const selector = $("[name='newBitWidth']");
        if (selector == undefined
            || selector.val() > 32
            || selector.val() &lt; 1
            || !$.isNumeric(selector.val())) {
            // fallback to previously saves state
            selector.val(selector.attr("old-val"));
        } else {
            selector.attr("old-val", selector.val());
        }
    }

    $(".objectPropertyAttribute").on("change keyup paste click", function () {
        // return;
        //////console.log(this.name+":"+this.value);

        checkValidBitWidth()
        scheduleUpdate();
        updateCanvas = true;
        wireToBeChecked = 1;
        if (simulationArea.lastSelected &amp;&amp; simulationArea.lastSelected[this.name])
            prevPropertyObj = simulationArea.lastSelected[this.name](this.value) || prevPropertyObj;
        else
            window[this.name](this.value);
    })
    $(".objectPropertyAttributeChecked").on("change keyup paste click", function () {
        // return;
        //////console.log(this.name+":"+this.value);



        scheduleUpdate();
        updateCanvas = true;
        wireToBeChecked = 1;
        if (simulationArea.lastSelected &amp;&amp; simulationArea.lastSelected[this.name])
            prevPropertyObj = simulationArea.lastSelected[this.name](this.value) || prevPropertyObj;
        else
            window[this.name](this.checked);
    })
}


function hideProperties() {
    $('#moduleProperty-inner').empty();
    $('#moduleProperty').hide();
    prevPropertyObj = undefined;
    $(".objectPropertyAttribute").unbind("change keyup paste click");
}

function escapeHtml(unsafe) {
    return unsafe
        .replace(/&amp;/g, "&amp;amp;")
        .replace(/&lt;/g, "&amp;lt;")
        .replace(/>/g, "&amp;gt;")
        .replace(/"/g, "&amp;quot;")
        .replace(/'/g, "&amp;#039;");
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-canvasApi.html">canvasApi</a></li><li><a href="module-data.html">data</a></li><li><a href="module-engine.html">engine</a></li><li><a href="module-eventQueue.html">eventQueue</a></li><li><a href="module-modules.html">modules</a></li><li><a href="module-node.html">node</a></li><li><a href="module-wire.html">wire</a></li></ul><h3>Classes</h3><ul><li><a href="CircuitElement.html">CircuitElement</a></li><li><a href="Clock.html">Clock</a></li><li><a href="DflipFlop.html">DflipFlop</a></li><li><a href="Dlatch.html">Dlatch</a></li><li><a href="JKflipFlop.html">JKflipFlop</a></li><li><a href="Keyboard.html">Keyboard</a></li><li><a href="layoutNode.html">layoutNode</a></li><li><a href="module-eventQueue-EventQueue.html">EventQueue</a></li><li><a href="module-modules-Adder.html">Adder</a></li><li><a href="module-modules-ALU.html">ALU</a></li><li><a href="module-modules-AndGate.html">AndGate</a></li><li><a href="module-modules-Arrow.html">Arrow</a></li><li><a href="module-modules-BitSelector.html">BitSelector</a></li><li><a href="module-modules-Buffer.html">Buffer</a></li><li><a href="module-modules-Button.html">Button</a></li><li><a href="module-modules-ConstantVal.html">ConstantVal</a></li><li><a href="module-modules-ControlledInverter.html">ControlledInverter</a></li><li><a href="module-modules-Decoder.html">Decoder</a></li><li><a href="module-modules-Demultiplexer.html">Demultiplexer</a></li><li><a href="module-modules-DigitalLed.html">DigitalLed</a></li><li><a href="module-modules-Flag.html">Flag</a></li><li><a href="module-modules-ForceGate.html">ForceGate</a></li><li><a href="module-modules-Ground.html">Ground</a></li><li><a href="module-modules-HexDisplay.html">HexDisplay</a></li><li><a href="module-modules-Input.html">Input</a></li><li><a href="module-modules-LSB.html">LSB</a></li><li><a href="module-modules-MSB.html">MSB</a></li><li><a href="module-modules-Multiplexer.html">Multiplexer</a></li><li><a href="module-modules-NandGate.html">NandGate</a></li><li><a href="module-modules-NorGate.html">NorGate</a></li><li><a href="module-modules-NotGate.html">NotGate</a></li><li><a href="module-modules-OrGate.html">OrGate</a></li><li><a href="module-modules-Output.html">Output</a></li><li><a href="module-modules-Power.html">Power</a></li><li><a href="module-modules-PriorityEncoder.html">PriorityEncoder</a></li><li><a href="module-modules-Rectangle.html">Rectangle</a></li><li><a href="module-modules-RGBLed.html">RGBLed</a></li><li><a href="module-modules-Rom.html">Rom</a></li><li><a href="module-modules-SevenSegDisplay.html">SevenSegDisplay</a></li><li><a href="module-modules-SixteenSegDisplay.html">SixteenSegDisplay</a></li><li><a href="module-modules-Splitter.html">Splitter</a></li><li><a href="module-modules-SquareRGBLed.html">SquareRGBLed</a></li><li><a href="module-modules-Stepper.html">Stepper</a></li><li><a href="module-modules-Text.html">Text</a></li><li><a href="module-modules-TriState.html">TriState</a></li><li><a href="module-modules-Tunnel.html">Tunnel</a></li><li><a href="module-modules-TwoComplement.html">TwoComplement</a></li><li><a href="module-modules-VariableLed.html">VariableLed</a></li><li><a href="module-modules-XnorGate.html">XnorGate</a></li><li><a href="module-modules-XorGate.html">XorGate</a></li><li><a href="module-node.Node.html">Node</a></li><li><a href="module-wire.Wire.html">Wire</a></li><li><a href="Random.html">Random</a></li><li><a href="Scope.html">Scope</a></li><li><a href="SRflipFlop.html">SRflipFlop</a></li><li><a href="StopWatch.html">StopWatch</a></li><li><a href="SubCircuit.html">SubCircuit</a></li><li><a href="TB_Input.html">TB_Input</a></li><li><a href="TB_Output.html">TB_Output</a></li><li><a href="TflipFlop.html">TflipFlop</a></li><li><a href="TTY.html">TTY</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addPlot">addPlot</a></li><li><a href="global.html#cancelLayout">cancelLayout</a></li><li><a href="global.html#changeClockEnable">changeClockEnable</a></li><li><a href="global.html#changeLightMode">changeLightMode</a></li><li><a href="global.html#clockTick">clockTick</a></li><li><a href="global.html#copy">copy</a></li><li><a href="global.html#Counter">Counter</a></li><li><a href="global.html#createBooleanPrompt">createBooleanPrompt</a></li><li><a href="global.html#createCombinationalAnalysisPrompt">createCombinationalAnalysisPrompt</a></li><li><a href="global.html#cut">cut</a></li><li><a href="global.html#decreaseLayoutHeight">decreaseLayoutHeight</a></li><li><a href="global.html#decreaseLayoutWidth">decreaseLayoutWidth</a></li><li><a href="global.html#determine_label">determine_label</a></li><li><a href="global.html#distance">distance</a></li><li><a href="global.html#DPR">DPR</a></li><li><a href="global.html#EEPROM">EEPROM</a></li><li><a href="global.html#errorDetected">errorDetected</a></li><li><a href="global.html#forceResetNodes">forceResetNodes</a></li><li><a href="global.html#globalScope">globalScope</a></li><li><a href="global.html#gridUpdate">gridUpdate</a></li><li><a href="global.html#height">height</a></li><li><a href="global.html#hideRestricted">hideRestricted</a></li><li><a href="global.html#increaseLayoutHeight">increaseLayoutHeight</a></li><li><a href="global.html#increaseLayoutWidth">increaseLayoutWidth</a></li><li><a href="global.html#layout_buffer">layout_buffer</a></li><li><a href="global.html#layoutMode">layoutMode</a></li><li><a href="global.html#layoutResetNodes">layoutResetNodes</a></li><li><a href="global.html#layoutTitleDown">layoutTitleDown</a></li><li><a href="global.html#layoutTitleLeft">layoutTitleLeft</a></li><li><a href="global.html#layoutTitleRight">layoutTitleRight</a></li><li><a href="global.html#layoutTitleUp">layoutTitleUp</a></li><li><a href="global.html#layoutUpdate">layoutUpdate</a></li><li><a href="global.html#lightMode">lightMode</a></li><li><a href="global.html#loading">loading</a></li><li><a href="global.html#loadSubCircuit">loadSubCircuit</a></li><li><a href="global.html#objectSelection">objectSelection</a></li><li><a href="global.html#openInNewTab">openInNewTab</a></li><li><a href="global.html#paneLayout">paneLayout</a></li><li><a href="global.html#paste">paste</a></li><li><a href="global.html#prevErrorMessage">prevErrorMessage</a></li><li><a href="global.html#prevShowMessage">prevShowMessage</a></li><li><a href="global.html#projectSaved">projectSaved</a></li><li><a href="global.html#RAM">RAM</a></li><li><a href="global.html#recoverProject">recoverProject</a></li><li><a href="global.html#renderLayout">renderLayout</a></li><li><a href="global.html#resetup">resetup</a></li><li><a href="global.html#returntheverilogfortheproject">return the verilog for the project</a></li><li><a href="global.html#runTest">runTest</a></li><li><a href="global.html#saveLayout">saveLayout</a></li><li><a href="global.html#scopeList">scopeList</a></li><li><a href="global.html#selectAll">selectAll</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#setupElementLists">setupElementLists</a></li><li><a href="global.html#setupEnvironment">setupEnvironment</a></li><li><a href="global.html#setupUI">setupUI</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showMessage">showMessage</a></li><li><a href="global.html#showRestricted">showRestricted</a></li><li><a href="global.html#startListeners">startListeners</a></li><li><a href="global.html#startPlot">startPlot</a></li><li><a href="global.html#tosetuptheplottingarea">to setup the plotting area</a></li><li><a href="global.html#toupdatetheplot">to update the plot</a></li><li><a href="global.html#toggleLayoutMode">toggleLayoutMode</a></li><li><a href="global.html#toggleLayoutTitle">toggleLayoutTitle</a></li><li><a href="global.html#uniq">uniq</a></li><li><a href="global.html#uniqueIdCounter">uniqueIdCounter</a></li><li><a href="global.html#unit">unit</a></li><li><a href="global.html#updateCanvas">updateCanvas</a></li><li><a href="global.html#updatePosition">updatePosition</a></li><li><a href="global.html#updateRestrictedElementsInScope">updateRestrictedElementsInScope</a></li><li><a href="global.html#updateRestrictedElementsList">updateRestrictedElementsList</a></li><li><a href="global.html#updateSimulation">updateSimulation</a></li><li><a href="global.html#updateSubcircuit">updateSubcircuit</a></li><li><a href="global.html#width">width</a></li><li><a href="global.html#willBeUpdated">willBeUpdated</a></li><li><a href="global.html#wireToBeChecked">wireToBeChecked</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed May 20 2020 15:07:41 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
